/*!
 * khmer-datetimepicker (flatpickr wrapper)
 * - Khmer language
 * - Khmer digits
 * - Optional Buddhist Era (+543) display year
 * - ✅ Khmer digits on calendar (days + header year)
 */
!function(n){if(n.flatpickr){var t=["០","១","២","៣","៤","៥","៦","៧","៨","៩"];n.flatpickr.l10ns.km={weekdays:{shorthand:["អា","ច","អ","ព","ព្រ","សុ","ស"],longhand:["អាទិត្យ","ចន្ទ","អង្គារ","ពុធ","ព្រហស្បតិ៍","សុក្រ","សៅរ៍"]},months:{shorthand:["មករា","កុម្ភៈ","មីនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ"],longhand:["មករា","កុម្ភៈ","មីនា","មេសា","ឧសភា","មិថុនា","កក្កដា","សីហា","កញ្ញា","តុលា","វិច្ឆិកា","ធ្នូ"]},firstDayOfWeek:1,rangeSeparator:" ដល់ ",weekAbbreviation:"សប្តាហ៍",scrollTitle:"Scroll ដើម្បីប្តូរ",toggleTitle:"ចុចដើម្បីប្តូរ",amPM:["ព្រឹក","ល្ងាច"]},n.KhmerDateTimePicker={attach:function(t,r){r=r||{};var o=Object.assign({locale:"km",dateFormat:"Y-m-d",altInput:!0,altFormat:"d/m/Y",allowInput:!0,disableMobile:!0,khmerDigits:!0,buddhistEra:!1,calendarKhmerDigits:!0,calendarBuddhistEra:!1},r),i=o.onReady,l=o.onValueUpdate,u=o.onChange;function c(n){if(n.altInput){var t=n.altInput.value||"";if(o.buddhistEra&&n.selectedDates&&n.selectedDates[0]){var a=n.selectedDates[0].getFullYear()+543;t=t.replace(/\b(\d{4})\b/,String(a))}o.khmerDigits&&(t=e(t)),n.altInput.value=t}}function f(n){if(o.calendarKhmerDigits&&n&&n.calendarContainer){n.calendarContainer.querySelectorAll(".flatpickr-day").forEach(function(n){n&&n.textContent&&(n.textContent=e(n.textContent))});var t=n.calendarContainer.querySelector(".cur-year");if(t||t.value){var r=parseInt(a(t.value),10),i=o.calendarBuddhistEra?r+543:r;t.value=e(i)}}}o.onReady=function(n,t,e){var r;c(e),f(e),(r=e).altInput&&o.allowInput&&r.altInput.addEventListener("blur",function(){r.altInput.value=a(r.altInput.value)}),function(n){if(n&&n.calendarContainer){var t=n.calendarContainer.querySelector(".cur-year");t&&(t.addEventListener("focus",function(){t.value=a(t.value)}),t.addEventListener("blur",function(){f(n)}))}}(e),"function"==typeof i&&i(n,t,e)},o.onValueUpdate=function(n,t,e){c(e),f(e),"function"==typeof l&&l(n,t,e)},o.onChange=function(n,t,e){c(e),f(e),"function"==typeof u&&u(n,t,e)};var d=o.onOpen,s=o.onMonthChange,p=o.onYearChange;return o.onOpen=function(n,t,e){f(e),"function"==typeof d&&d(n,t,e)},o.onMonthChange=function(n,t,e){f(e),"function"==typeof s&&s(n,t,e)},o.onYearChange=function(n,t,e){f(e),"function"==typeof p&&p(n,t,e)},n.flatpickr(t,o)},toKhmerDigits:e,toLatinDigits:a}}else console.error("flatpickr not found. Load flatpickr first.");function e(n){return String(n).replace(/\d/g,function(n){return t[n]})}function a(n){var t={"០":"0","១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9"};return String(n).replace(/[០-៩]/g,function(n){return t[n]||n})}}(window);